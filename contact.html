<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Gbenga Oni is a Nigerian Software developer. A designer, developer, entrepreneur, lover of books and writing">
  <meta name="keywords" content="Gbenga Oni, design, designer, developer, Lagos, Nigeria, UX, Mobile web, software developer, css, html, jQuery, PHP, Laravel, Javascript, React Js, React Native, Redux, web security, web app">
  <meta name="author" content="Gbenga Oni">
  <title>Gbenga Oni - Software developer</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css">
  <script src="https://use.fontawesome.com/05f5671d94.js"></script>
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-126371045-1"></script>
  <script src="src/js/analytics.js"></script>
  <style>
    #form-container{
      background-color: white;
        padding: 30px;
        margin-left: -15px;
    }
  @media only screen and (max-width: 768px) {
    #form-container{ 
        margin-left: 0px;
        padding: 30px
    }
    
}
  </style>

<link href="/contact_bundle.css" rel="stylesheet"></head>
<body> 
  
  <nav id="menu">
    <div class="nav-menu d-flex justify-content-between">
      <div class="title">
        <a href="./#about-me" class="link name">Gbenga Oni</a>
      </div>
      <div class="sections">
        <a href="./#about-me" class="link">About Me</a>
        <a href="./#skills" class="link">Skills</a>
        <a href="projects.html" class="link">Projects</a>
        <a href="https://medium.com/@Gbxnga" class="link">Blog</a>
        <a href="contact.html" class="link -active">Contact Me</a>
      </div>
    </div>
  </nav>

  <div class="container main-container" style="top:10%"><!-- start of main-container -->
    <section class="about-me row" id="about-me"><!-- start of about-me section -->
     <!--  <div class="col-10 col-sm-5 ml-auto mr-auto col-lg-3">
        <div class="avatar-box mb-5">
          <img class="photo" src="https://pbs.twimg.com/profile_images/884860135608156160/5sxWl8MC_400x400.jpg" alt="profile picture of IvÃ¡n">
        </div>
      </div> -->

      <div class="col-12 col-lg-10 ml-auto mr-auto">
        <h2>Contact Me</h2>
        <div class="separator"></div>
        <div class="row">

        <div class="col-md-4 d-none d-sm-block">
            <img class="img-responsive" src="./src/img/contact-me.jpg" style="width:100%">  

        </div>
        <div class="col-md-8" id="form-container">
        <div class="bio flow-text" id="form-container-inner">
           
        </div> 
        </div>
        </div>


         
      </div>
    </section><!-- end of about-me section--> 
  </div><!-- end of main container -->
<script type="text/javascript" src="/contact_bundle.js"></script>
<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
<script type="text/babel">
const domContainer = document.querySelector('#form-container-inner');
class Form extends React.Component{

  constructor(){
    super()
    this.state = { 
      message:"",
      showMessage:false,
      loading:false
    }

    this.nameInput = React.createRef();
    this.emailInput = React.createRef();
    this.messageInput = React.createRef();
    this.subjectInput = React.createRef();

    this.handleSendMail = this.handleSendMail.bind(this)
  }
  handleSendMail(e){
            e.preventDefault();
            this.setState({loading:true}); 
            var that = this;

            const name = this.nameInput.value;
            const email = this.emailInput.value;
            const message = this.messageInput.value;
            const subject = this.subjectInput.value;

            axios.post(`https://15v5keagxg.execute-api.us-east-1.amazonaws.com/v1/send-mail`,
            {name,email,subject,message})
            .then(response =>  {
              console.log(response);
              const {success} = response.data
              if(success){

                this.setState({message:"Email Successfully Sent",showMessage:true});
                document.getElementById("contact-me-form").reset();


              }else{
                this.setState({message:"Failed To Send Email.",showMessage:true})

              }
              setTimeout(() => {

                this.setState({showMessage:false})

              }, 4000);
              this.setState({loading:false}); 
              
              
            })
            .catch(function (error) {
              console.error(error);
              that.setState({loading:false,message:"Failed To Send Email.",showMessage:true});
              setTimeout(() => {

                that.setState({showMessage:false})

              }, 4000); 
            }); 
           
       } 

  render(){

    const { showMessage, message, loading } = this.state

    return(
      <div>
        { showMessage ? <div class="alert alert-success">{message}</div> :""}
      <form onSubmit={this.handleSendMail} id="contact-me-form">
          <input ref={input => (this.nameInput = input)} required style={{backgroundColor:"white",padding:10,width:"100%",border:"none",outline:"none",marginBottom:15,borderBottom:"2px solid #e57373"}} placeholder="Name"/>
          <input ref={input => (this.emailInput = input)} required type="email" style={{backgroundColor:"white",padding:10,width:"100%",border:"none",outline:"none",marginBottom:15,borderBottom:"2px solid #e57373"}} placeholder="Email"/>
          <input ref={input => (this.subjectInput = input)} required style={{backgroundColor:"white",padding:10,width:"100%",border:"none",outline:"none",marginBottom:15,borderBottom:"2px solid #e57373"}} placeholder="Subject"/>
          <textarea ref={input => (this.messageInput = input)} required style={{backgroundColor:"white",padding:10,width:"100%",border:"none",outline:"none",marginBottom:15,borderBottom:"2px solid #e57373", height:200}} placeholder="Message"></textarea>

          <button disabled={loading} type="submit"  className="btn" style={{backgroundColor:"#e57373",color:"white",width:200}} >{ loading ? <i class="fa fa-spinner"></i> : "SEND MESSAGE"}</button>
      </form>
      </div>
    )
  }
}
ReactDOM.render(<Form/>, domContainer);
</script>
</body>
</html>